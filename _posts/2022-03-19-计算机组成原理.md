# 计算机组成原理



## 计算机体系结构

- 若不解决功耗的问题，处理器的工作主频很难超过4GHz
- 计算机的性能取决于CPU，也取决于其他子系统的性能
- 哈佛体系结构：将数据和指令放在不同的存储器中（或者使用不同的总线传输数据和指令）
- 理解cache会使借助优化数据访问方式的技术



## 计算机算术

- 数字表示
- 位置计数法
- 引起误差的原因
  - 数自身的属性
  - 计算机无法精确地完成算术运算
- 二进制数的一个特点就是：即便用了很多位，也不能将所有的十进制小数准确地表示为二进制
- 负数表示办法
  - 符号及值表示法：用于浮点运算中
  - 二进制补码法
    - 运算溢出
    - 如果操作数A和操作数B的符号为相同，但是结果的符号为不同时，则溢出
  - 移码表示法
- 浮点数：数值和小数点在数值中的位置
  - 32位单精度浮点数
  - 64位双精度浮点数
  - 128位四精度浮点数



## 体系结构与组成

- RISC
  - 指令集规整并且长度固定，唯一能访问内存单元的操作就是载入寄存器和存储寄存器。
  - ARM、MIPS、SPARC，寄存器使用名字而不是地址来访问的，例如r0、r1、r2...r15（ARM的命名）
- CISC
  - 指令集不规整且长度可变，允许把内存单元和寄存器的值相加，把结果存储到内存中
  - Pentium系统等
- ISA（指令集体系结构）
  - 寄存器集
  - 寻址方式
    - 立即数寻址
    - 直接寻址：不支持可重定位的代码
      - 可重定位代码可以被移动到存储器中任何位置而无需计算新的操作数的地址
      - 可重定位代码可以被操作系统中断，然后中断程序可再次使用该代码而不会覆盖之前的代码实例所用的数据
    - 间接寻址
  - 指令格式
    - ARM的所有指令和数据需要按32位字边界对齐存放
- 编译器无法挖掘出处理器的所有特性
- 子程序调用和返回
  - 叶子程序：叶子程序不调用其他子程序



## 指令集体系结构-广度和深度

- 指令集体系结构包括：数据类型（每一个字的位数以及各个位的含义），用来保存临时结果的寄存器，指令的类型和格式，以及寻址方式（表示数据在村村器中存放位置的方法）
- 在运行时为变量分配存储空间的过程：动态分配
  - 动态寻址
  - 无延迟地将抽象数据元素的地址映射到存储器真实数据元素的位置上
- 在编译时进行为变量分配一个存储位置：静态分配
- 静态分配的一个必然结果：它不允许递归
- 压缩代码
  - Thumb：压缩ARM指令集
  - 代码密度



## 计算机体系结构与多媒体

- 存储容量、处理能力、低延迟、带宽
- 多媒体应用的共同特点：并行地对一组基本数据元素进行简单操作
- 短向量操作
- 可获得的数据压缩率的上限取决于数据中的冗余（重复）程度
- 真正的随机数据是根本无法被压缩的，因为没有要删除的冗余信息
- MP3先使用有ssh
- DSP
  - 体系结构
- SIMD处理简介
  - 基本原则：能够处理一个寄存器中多个数据的能力，以及能够完成多媒体和密码等其他领域应用中关键操作的能力
- Intel SSE3指令
- ARM
  - Cortex-A ARM处理器包括高级SIMD体系结构扩展指令 NEON
- 现在处理器通过面向多媒体处理优化指令集，这些指令集强化技术增加处理器在完成视频、音频以及图像处理时的吞吐率
  - 这些指令的关键在于SIMD或单指令多数据模式，使用一条指令可以并行处理两个或更多的数据



## 处理器控制

- 流水线技术
  - 流水线对那些会降低机器性能的指令类型或机器指令序列相当敏感
  - 流水线的性能上限是每个时钟周期一条指令
- 现在处理器特点
  - 存储程序计算机已不能准确刻画处理器体系结构
  - 使用哈弗结构，因为它们使用分离的并行访问的指令存储器和数据存储器
  - 但高速片上指令和Cache的使用意味着处理器能同时访问指令和数据
- 流水线简介
  - 机器周期
    - 取指
    - 译码
    - 读操作数
    - 执行
    - 保存操作数
  - 一旦流水线被充满，每一个时钟周期都会完成一个新的操作，这是无法做到的
    - 分支对流水线的影响
    - 数据准备不充分的影响











