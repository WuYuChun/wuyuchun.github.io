# shell编程

### 基本概述

角色：作为用户和系统最底层之间（内核）的缓冲带

只识别3种基本文件：普通文件、目录文件、特殊文件

### 什么是shell

组成完整的linux系统的各种实用工具位于计算机磁盘中，当在需要的时候会被加载到内存中并执行

shell也是一个实用工具程序，作为登录过程中一部分被载入内存中执行

shell会搜索磁盘，直到找出所需要执行的程序为止，然后由linux内核负责程序的执行

wc -l user 和 wc -l < user 的区别

- 对于第一个wc程序来说，它接收到两个参数，-l 和 文件名
- 对于第二个来说，被重定向，它只接收到输入端的数据，和 -l 。也就是说它看不到文件了



### 脚本和变量

变量等号之间不能有空格

没有类型的概念，赋值1就是表示1字符串

${variable}结构的含义

表达式计算：$(())



### 引用

命令替换



### 传递参数

shell会自动将第一个参数保存在特殊的shell变量1中，将第二个参数保存在变量2中。这些特殊变量叫做位置参数

这些变量是在shell完成正常命令行（I/O重定向、变量替换、文件名替换）处理之后被赋值的

$#

$*



### 条件语句

程序执行完成，就会向shell返回一个退出状态码

$?：设置为最后一条命令的退出状态

在使用整数操作符时，将变量的值视为整数的是test命令，而非shell。因此shell变量的类型是什么，都能够进行比较

----

[] 测试 test命令

```shell
[ \( "$count" -ge 0 \) ]
```

括号两边必须有空格

因为test要求条件语句中每一个元素都是独立的参数

----



### 调试选项 -x

调试shell程序



### 循环





### 环境

登录shell和子shell之间的关系

登录shell环境和子shell环境存在很大的区别

- 没有办法在子shell中改变父shell中变量的值
- 未被导出的变量都是局部变量，子shell并不知道这些变量的存在
- 导出的变量及其值都会被复制到子shell的环境中，在其中可以访问并修改这些导出变量，但是这些修改不会影响到父shell
- 导出变量会一直递推



















