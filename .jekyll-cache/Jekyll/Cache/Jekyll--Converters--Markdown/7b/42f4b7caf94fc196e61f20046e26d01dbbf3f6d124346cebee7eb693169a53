I"©<p>listi</p>

<p>[10:07 PM]</p>

<h1 id="ç›®æ ‡">ç›®æ ‡</h1>
<p><strong>åœ¨æˆ‘ä»¬åªæœ‰ä¸€ä¸ªæŒ‡å‘åŸºç±»çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨æ—¶ç¡®å®šä¸€ä¸ªå¯¹è±¡çš„å‡†ç¡®ç±»å‹</strong>ï¼Œè™šå‡½æ•°æœºåˆ¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®å®šç±»æ˜¯å“ªç§ç±»å‹ï¼Œä½†æ˜¯å´è¿œè¿œä¸å¤Ÿã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class shape()
{
	shape();
	~shape();
	virtual void draw() = 0;
}
</code></pre></div></div>

<p>ä»è¿™ä¸ªåŸºç±»æ´¾ç”Ÿå‡ºä¸‰ç§ä¸åŒçš„ç±»ï¼šcircleã€squareã€triangleã€‚æˆ‘ä»¬è°ƒç”¨å…¶ä¸­ç±»çš„drawæ–¹æ³•ï¼Œå³ä½¿ç”¨ä¸€ä¸ªshape()çš„æŒ‡é’ˆæ¥è°ƒç”¨ï¼Œä»»ç„¶è¢«æ­£ç¡®è°ƒç”¨ã€‚</p>

<hr />
<p><strong>æ³¨æ„</strong>ï¼šRTTIä¸å¼‚å¸¸ä¸€æ ·ï¼Œä¾èµ–é©»ç•™åœ¨è™šå‡½æ•°è¡¨ä¸­çš„ç±»å‹ä¿¡æ¯ã€‚å¦‚æœè¯•å›¾åœ¨ä¸€ä¸ªæ²¡æœ‰è™šå‡½æ•°çš„ç±»ä¸Šç”¨RTTIï¼Œå°±å¾—ä¸åˆ°é¢„æœŸçš„ç»“æœã€‚(å¯ä»¥è¿›è¡Œæµ‹è¯•ä¸€ä¸‹)</p>

<hr />

<h1 id="rttiçš„ä¸¤ç§ä½¿ç”¨æ–¹æ³•">RTTIçš„ä¸¤ç§ä½¿ç”¨æ–¹æ³•</h1>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨typeidå…³é”®å­—ï¼Œæ³¨æ„è¿™æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œåƒsizeofä¸€æ ·ã€‚</p>

<p>ï¼ˆ2ï¼‰â€œå®‰å…¨ç±»å‹å‘ä¸‹æ˜ å°„â€ï¼Œå…¶å®å°±æ˜¯ä¸â€œå‘ä¸Šæ˜ å°„â€ç›¸åã€‚</p>

<p><strong>å®ç°çš„æ–¹æ³•</strong>ï¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥è¯•ç€å°† shape<em>æŒ‡æ´¾ä¸ºä¸€ä¸ª circle</em> (åœ¨æœ¬ä¾‹ä¸­ )ï¼Œæ£€æŸ¥æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ•°æ®ç±»å‹ã€‚å¦‚æœè¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªåœ°å€ï¼Œåˆ™æˆåŠŸï¼›å¦‚æœè¿”å› NULLï¼Œè¯´æ˜æˆ‘ä»¬å¹¶æ²¡æœ‰ä¸€ä¸ªcircle *å¯¹è±¡ã€‚C++çš„RTIIçš„â€œå®‰å…¨ç±»å‹å‘ä¸‹æ˜ å°„â€å°±æ˜¯æŒ‰ç…§è¿™ç§â€œè¯•æ¢æ˜ å°„â€å‡½æ•°çš„æ ¼å¼ã€‚ä¾‹å­ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shape *sp = new circle;
circle *cp = dynamic_cast&lt;circle*&gt;sp
if(cp) cout&lt;&lt;"cast successful"
</code></pre></div></div>

<p>è§ä¸‹é¢ä¾‹å­</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class shape
{
protected:
	static int count;
public:
shape()
{
	count++;
}
virtual ~shape() 
{
	count--;
}
virtual void draw() 
{

}
};

int shape::count = 0;

class rectage:public shape
{
void operator=(rectage &amp;);
protected:
	static int count;
public:
rectage()
{
	count++;
}
~rectage()
{
	count--;
}
void draw()
{
	std::cout&lt;&lt;"~~~~~~"&lt;&lt;std::endl;
}
static int quatiy()
{
	return count;
}
};

int rectage::count = 0;

class circle:public shape
{
void operator=(rectage &amp;);
protected:
	static int count;
public:
circle()
{
	count++;
}
~circle()
{
	count--;
}
void draw()
{
	std::cout&lt;&lt;"~~~~~~"&lt;&lt;std::endl;
}
static int quatiy()
{
	return count;
}
};

int circle::count = 0;

int main( int argc , char *argv[] )
{
std::vector&lt;shape *&gt; vVal;
time_t t;
srand((unsigned)time(&amp;t));
const int mod = 12;
for ( int i = 0 ; i &lt; rand()%12; ++i )
{
	vVal.push_back((shape *)(new rectage));
}
for ( int j = 0; j &lt; rand()%12; ++j )
{
	vVal.push_back((shape *)(new circle));
}
int iRecCount = 0;
int iCirCount = 0;
for ( int u = 0; u &lt; vVal.size() ; ++u)
{
	if ( dynamic_cast&lt;rectage*&gt;(vVal.at(u)))
	{
		iRecCount++;
	}

	if ( dynamic_cast&lt;circle*&gt;(vVal.at(u)))
	{
		iCirCount++;
	}
}

std::cout&lt;&lt;vVal.size()&lt;&lt;std::endl
	&lt;&lt;iRecCount &lt;&lt;" == "&lt;&lt;rectage::quatiy()&lt;&lt;std::endl
	&lt;&lt;iCirCount &lt;&lt;" == "&lt;&lt;circle::quatiy()&lt;&lt;"\n";


	return EXIT_SUCCESS;
}
</code></pre></div></div>

<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>RIITæ˜¯C++çš„ç¬¬äºŒå¤§ç‰¹å¾ï¼ˆç¬¬ä¸€å¤§ç‰¹å¾æ˜¯ä»€ä¹ˆé¢ï¼Ÿï¼‰ï¼Œä¸Šé¢åªæ˜¯å¤§æ¦‚çš„ä»‹ç»äº†ä¸€ä¸‹å®ƒï¼Œè¯¦ç»†çš„ä½¿ç”¨è§ä¸‹é¢åˆ†è§£ã€‚</p>

:ET