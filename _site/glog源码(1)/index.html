<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <title>glog源码（1） &#8211; 西电托儿所</title>
    <meta name="description" content="       Contents    ">
    <meta name="keywords" content="c++, glog">
    <link rel="canonical" href="/glog%E6%BA%90%E7%A0%81(1)/">
        <!-- Twitter Cards -->
    <meta name="twitter:title" content="glog源码（1）">
    <meta name="twitter:description" content="       Contents    ">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="/assets/img/Logo.png">
    <!-- Open Graph -->
    <meta property="og:locale" content="utf-8">
    <meta property="og:type" content="article">
    <meta property="og:title" content="glog源码（1）">
    <meta property="og:description" content="       Contents    ">
    <meta property="og:url" content="/glog%E6%BA%90%E7%A0%81(1)/">
    <meta property="og:site_name" content="西电托儿所">
    <meta property="og:image" content="/assets/img/Logo.png">

    
    
    <!-- Handheld -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/assets/img/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/img/favicon/apple-touch-icon-144x144.png">
    <link rel="icon" type="image/png" href="/assets/img/favicon/favicon.png">
    <link rel="shortcut icon" href="/assets/img/favicon/favicon.ico">
    <!-- Feed -->
    <link rel="alternate" type="application/rss+xml" title="西电托儿所" href="/feed.xml" />
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css">
</head>


<body>
        <nav class="nav">
        <ul class="list">
            
				    
				    <li class="item"><a class="link" href="/" >Home</a></li>
				
				    
				    <li class="item"><a class="link" href="/blog/" >Blog</a></li>
				
				    
				    <li class="item"><a class="link" href="/projects/" >Projects</a></li>
				
				    
				    <li class="item"><a class="link" href="/about/" >About</a></li>
				
        </ul>
    </nav>

    <div class="wrapper">
        <div class="title">
            <h1>glog源码（1）</h1>
            <h4>08 Sep 2016</h4>
        </div>
        <div class="article">
            <section id="table-of-contents" class="toc">
  <header>
    <h3><i class="fa fa-book"></i> Contents</h3>
  </header>
<div id="drawer">
<ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">前言</a></li>
  <li><a href="#section-1" id="markdown-toc-section-1">流程</a>    <ul>
      <li><a href="#log" id="markdown-toc-log">LOG（）宏</a></li>
      <li><a href="#section-2" id="markdown-toc-section-2">组织消息的类</a></li>
      <li><a href="#section-3" id="markdown-toc-section-3">组织日记文件的类</a></li>
    </ul>
  </li>
  <li><a href="#section-4" id="markdown-toc-section-4">总结</a></li>
</ul>

  </div>
</section>
<!-- /#table-of-contents -->

<p>[07:24 PM]</p>

<h1 id="section">前言</h1>
<p>glog是一个应用级别的日记系统，使用非常方便，重要的代码行为8K，下面仅仅是记录自己看glog源码时候的一些关键点。
<a href="https://github.com/google/glog">glog链接</a></p>

<h1 id="section-1">流程</h1>
<p><strong>若是设计一个日记系统，需要考虑的点有哪些？</strong></p>

<blockquote>
  <p>1.系统中当前仅当有一个日记输出，也就是说，日记的输出是顺序</p>
</blockquote>

<blockquote>
  <p>2.输出的消息格式，以及等级</p>
</blockquote>

<blockquote>
  <p>3.输出的日记文件，以及文件的组织</p>
</blockquote>

<hr />

<p>流程如图：</p>

<p><img src="http://img.blog.csdn.net/20160908194848945" alt="liucheng Image" /></p>

<p><strong>其中LogMessage类是用于组织消息内容，而LogDestination是用于组织消息的载体–文件的组织</strong>，其中所谓的消息流就是通过这样写入到磁盘中的，当然
其中代码中有很多的技巧之处。</p>

<p>在实际使用中，在代码中一般用glog所定义的宏进行消息的输出，如下图：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>if(count &lt; 5 ){
    LOG(INFO) &lt;&lt; "less 5";
}
</code></pre>
</div>
<p>输出的日记文件在：（linux）/tmp，类似<em>example.bin.username-MS-$$.test.log.INFO.20160908-141658.6235</em>这种，
（window）则是在用户/appdata/tmp/。当然这个的前提是没有设置glog的输出目录，而仅仅使用默认的。</p>

<h2 id="log">LOG（）宏</h2>

<p>glog使用宏作为日记输出，这对于应用人员来说是非常方便，并且其也定义了相应的等级，根据宏的拼接，来生成LogMessage，如下图</p>

<p><img src="http://img.blog.csdn.net/20160908200332370" alt="hong Image" /></p>

<h2 id="section-2">组织消息的类</h2>
<p>关于消息的各个类，如下图所见，但是其中图与代码并不是一一对应，缺少一些小的细节，但是大体上是能反应关系的，其中用于<strong>C++的流的概念</strong>。
<img src="http://img.blog.csdn.net/20160908201239180" alt="" /></p>

<h2 id="section-3">组织日记文件的类</h2>

<p>这个是用于组织日记文件的类，具体的成员变量和成员函数没有给出。
<img src="http://img.blog.csdn.net/20160910145818439" alt="destion" /></p>

<h1 id="section-4">总结</h1>

        </div>
    </div>
        <div class="footer">
        西电托儿所 © 2016 <a href="/feed.xml" target="_blank"><i class="fa fa-fw fa-feed"></i></a>
    </div>

    <script src="/assets/js/jquery-1.12.2.min.js"></script>
<script src="/assets/js/jquery.goup.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $.goup({
        trigger: 500,
        bottomOffset: 10,
        locationOffset: 20,
        containerRadius: 0,
        containerColor: '#fff',
        arrowColor: '#000',
        goupSpeed: 'normal'
    });
});
</script>


</body>
</html>
